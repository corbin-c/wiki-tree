(this["webpackJsonpwiki-tree"]=this["webpackJsonpwiki-tree"]||[]).push([[0],{141:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n.n(a),i=n(33),c=n.n(i),s=n(12),o=n(16),u=n.n(o),l=n(19),d=n(17),j=n(14),b=n(0),h=n(1),p=n(44),g=n(63),f=function(){function e(t){Object(b.a)(this,e),this.baseUrl="https://".concat(t,".wikipedia.org/w/api.php?")}return Object(h.a)(e,[{key:"buildRequest",value:function(e){var t=this,n=function(e){return e.format="json",e.utf8=!0,e.origin="*",e.redirects=!0,Object.keys(e).map((function(t){return t+"="+("object"===typeof e[t]?e[t].join("|"):e[t])})).join("&")};return e.pageids&&"object"===typeof e.pageids?e.pageids.map((function(a){var r=Object(j.a)(Object(j.a)({},e),{},{pageids:a});return{pageid:a,url:t.baseUrl+n(r)}})):[{pageid:e.pageids,cmpageid:e.cmpageid,url:this.baseUrl+n(e)}]}},{key:"fetchAndContinue",value:function(e){return function(){var e=Object(g.a)(u.a.mark((function e(t,n){var a,r,i,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!0,r=!0,i=[],c="";case 4:if("undefined"===typeof r){e.next=22;break}if(s=Object.keys(r).filter((function(e){return!i.includes(e)}))[0],!0===r||"undefined"!==typeof s&&"continue"!==s){e.next=9;break}return void(e.next=9);case 9:return o=!0===a&&!0===r?"":"&"+s+"="+r[s],"undefined"!==typeof s&&(c!==s&&""!==c&&i.push(c),c=s),e.next=13,Object(p.a)(fetch(t+o));case 13:return a=e.sent,e.next=16,Object(p.a)(a.json());case 16:return a=e.sent,r=a.continue,e.next=20,a.query;case 20:e.next=4;break;case 22:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(e,this.fetcher)}}]),e}(),m=n(5);var O=function(e){var t=e.handleChanges,n=e.lang,r=e.id,i=Object(a.useState)(""),c=Object(d.a)(i,2),s=c[0],o=c[1],j=Object(a.useState)([]),b=Object(d.a)(j,2),h=b[0],p=b[1],g=Object(a.useRef)(null),O=function(){var e=Object(l.a)(u.a.mark((function e(t,a){var r,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new f(n),!(t.length>0)){e.next=20;break}return i=r.buildRequest({action:"query",list:"search",srsearch:t,srnamespace:0,srlimit:10})[0].url,e.prev=3,e.next=6,fetch(i);case 6:return c=e.sent,e.next=9,c.json();case 9:c=(c=e.sent).query.search,p(c),setTimeout((function(){a.focus()}),10),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0);case 18:e.next=21;break;case 20:p([]);case 21:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t,n){return e.apply(this,arguments)}}(),k=function(e,t){O(e,t)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{htmlFor:"searchInput"+r,children:"Search terms:"}),Object(m.jsx)("input",{autoFocus:!0,autoComplete:"off",id:"searchInput"+r,onChange:function(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),o(e.target.value),clearTimeout(g.current),t(e.target.value),g.current=setTimeout((function(){k(e.target.value,e.target)}),1e3)},type:"search",list:"results"+r,value:s,className:"textInput"}),h.length>0?Object(m.jsx)("datalist",{id:"results"+r,children:h.map((function(e){return Object(m.jsx)("option",{value:e.title,children:e.title},e.pageid)}))}):Object(m.jsx)(m.Fragment,{})]})},k=[["Ac\xe8h","ace"],["Afrikaans","af"],["Akan","ak"],["Alemannisch","als"],["aragon\xe9s","an"],["arm\xe3neashti","roa-rup"],["arpetan","frp"],["asturianu","ast"],["Atikamekw","atj"],["Ava\xf1e \u1ebd","gn"],["Aymar aru","ay"],["az\u0259rbaycanca","az"],["Bahasa Banjar","bjn"],["Bahasa Hulontalo","gor"],["Bahasa Indonesia","id"],["Bahasa Melayu","ms"],["bamanankan","bm"],["Basa Banyumasan","map-bms"],["Basa Jawa","jv"],["Basa Sunda","su"],["Baso Minangkabau","min"],["Bikol Central","bcl"],["Bislama","bi"],["Boarisch","bar"],["bosanski","bs"],["brezhoneg","br"],["B\xe2n-l\xe2m-g\xfa","zh-min-nan"],["catal\xe0","ca"],["Cebuano","ceb"],["Chamoru","ch"],["Chavacano de Zamboanga","cbk-zam"],["Chi-Chewa","ny"],["chiShona","sn"],["chiTumbuka","tum"],["Choctaw","cho"],["corsu","co"],["Cymraeg","cy"],["dansk","da"],["davvis\xe1megiella","se"],["Deitsch","pdc"],["Deutsch","de"],["Din\xe9 bizaad","nv"],["dolnoserbski","dsb"],["Dorerin Naoero","na"],["Ebon","mh"],["eesti","et"],["emili\xe0n e rumagn\xf2l","eml"],["English","en"],["espa\xf1ol","es"],["Esperanto","eo"],["estreme\xf1u","ext"],["euskara","eu"],["e\u028begbe","ee"],["Fiji Hindi","hif"],["fran\xe7ais","fr"],["Frysk","fy"],["Fulfulde","ff"],["furlan","fur"],["f\xf8royskt","fo"],["Gaeilge","ga"],["Gaelg","gv"],["Gagana Samoa","sm"],["Gagauz","gag"],["galego","gl"],["G\xe0idhlig","gd"],["G\u0129k\u0169y\u0169","ki"],["Hausa","ha"],["Hawai\u02bbi","haw"],["Hiri Motu","ho"],["hornjoserbsce","hsb"],["hrvatski","hr"],["Ido","io"],["Igbo","ig"],["Ilokano","ilo"],["interlingua","ia"],["Interlingue","ie"],["isiXhosa","xh"],["isiZulu","zu"],["italiano","it"],["I\xf1upiak","ik"],["Kab\u0269y\u025b","kbp"],["kalaallisut","kl"],["Kanuri","kr"],["Kapampangan","pam"],["kasz\xebbsczi","csb"],["kernowek","kw"],["Kinyarwanda","rw"],["Kirundi","rn"],["Kiswahili","sw"],["Kongo","kg"],["Krey\xf2l ayisyen","ht"],["kurd\xee","ku"],["Kwanyama","kj"],["la .lojban.","jbo"],["Ladino","lad"],["latga\u013cu","ltg"],["Latina","la"],["latvie\u0161u","lv"],["lea faka-Tonga","to"],["lietuvi\u0173","lt"],["Ligure","lij"],["Limburgs","li"],["Lingua Franca Nova","lfn"],["ling\xe1la","ln"],["Livvinkarjala","olo"],["Luganda","lg"],["lumbaart","lmo"],["L\xebtzebuergesch","lb"],["magyar","hu"],["Malagasy","mg"],["Malti","mt"],["Mirand\xe9s","mwl"],["Mvskoke","mus"],["M\xecng-d\u0115\u0324ng-ng\u1e73\u0304","cdo"],["M\u0101ori","mi"],["Na Vosa Vakaviti","fj"],["Napulitano","nap"],["Nederlands","nl"],["Nedersaksies","nds-nl"],["Nordfriisk","frr"],["Norfuk / Pitkern","pih"],["norsk","no"],["norsk nynorsk","nn"],["Nouormand","nrm"],["Novial","nov"],["N\u0101huatl","nah"],["N\u0113hiyaw\u0113win / \u14c0\u1426\u1403\u152d\u140d\u140f\u1423","cr"],["occitan","oc"],["Oromoo","om"],["Oshiwambo","ng"],["Otsiherero","hz"],["o\u02bbzbekcha/\u045e\u0437\u0431\u0435\u043a\u0447\u0430","uz"],["Pangasinan","pag"],["Papiamentu","pap"],["Patois","jam"],["Picard","pcd"],["Piemont\xe8is","pms"],["Plattd\xfc\xfctsch","nds"],["polski","pl"],["portugu\xeas","pt"],["P\xe4lzisch","pfl"],["Qaf\xe1r af","aa"],["Qaraqalpaqsha","kaa"],["q\u0131r\u0131mtatarca","crh"],["reo tahiti","ty"],["Ripoarisch","ksh"],["Romani","rmy"],["rom\xe2n\u0103","ro"],["rumantsch","rm"],["Runa Simi","qu"],["sardu","sc"],["Scots","sco"],["Seeltersk","stq"],["Sesotho","st"],["Sesotho sa Leboa","nso"],["Setswana","tn"],["shqip","sq"],["sicilianu","scn"],["Simple English","simple"],["SiSwati","ss"],["sloven\u010dina","sk"],["sloven\u0161\u010dina","sl"],["Soomaaliga","so"],["Sranantongo","srn"],["srpskohrvatski / \u0441\u0440\u043f\u0441\u043a\u043e\u0445\u0440\u0432\u0430\u0442\u0441\u043a\u0438","sh"],["suomi","fi"],["svenska","sv"],["S\xe4ng\xf6","sg"],["Tagalog","tl"],["Taqbaylit","kab"],["tarand\xedne","roa-tara"],["tetun","tet"],["Thu\u0254\u014bj\xe4\u014b","din"],["Ti\u1ebfng Vi\u1ec7t","vi"],["Tok Pisin","tpi"],["Tsets\xeahest\xe2hese","chy"],["Tshivenda","ve"],["Twi","tw"],["T\xfcrkmen\xe7e","tk"],["T\xfcrk\xe7e","tr"],["Vahcuengh","za"],["veps\xe4n kel","vep"],["Volap\xfck","vo"],["v\xe8neto","vec"],["V\xf5ro","fiu-vro"],["walon","wa"],["West-Vlams","vls"],["Winaray","war"],["Wolof","wo"],["Xitsonga","ts"],["Yor\xf9b\xe1","yo"],["Zazaki","diq"],["Ze\xeauws","zea"],["\xc6nglisc","ang"],["\xedslenska","is"],["\u010de\u0161tina","cs"],["\u015bl\u016fnski","szl"],["\u017eemait\u0117\u0161ka","bat-smg"],["\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac","el"],["\u03a0\u03bf\u03bd\u03c4\u03b9\u03b1\u03ba\u03ac","pnt"],["\u0430\u0432\u0430\u0440","av"],["\u0430\u0434\u044b\u0433\u0430\u0431\u0437\u044d","ady"],["\u0410\u0434\u044b\u0433\u044d\u0431\u0437\u044d","kbd"],["\u0410\u04a7\u0441\u0448\u04d9\u0430","ab"],["\u0431\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430","ba"],["\u0431\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f","be"],["\u0431\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f (\u0442\u0430\u0440\u0430\u0448\u043a\u0435\u0432\u0456\u0446\u0430)\u200e","be-tarask"],["\u0431\u0443\u0440\u044f\u0430\u0434","bxr"],["\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438","bg"],["\u0413\u04c0\u0430\u043b\u0433\u04c0\u0430\u0439","inh"],["\u0418\u0440\u043e\u043d","os"],["\u043a\u043e\u043c\u0438","kv"],["\u043a\u044a\u0430\u0440\u0430\u0447\u0430\u0439-\u043c\u0430\u043b\u043a\u044a\u0430\u0440","krc"],["\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430","ky"],["\u043a\u044b\u0440\u044b\u043a \u043c\u0430\u0440\u044b","mrj"],["\u043b\u0430\u043a\u043a\u0443","lbe"],["\u043b\u0435\u0437\u0433\u0438","lez"],["\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438","mk"],["\u043c\u043e\u043a\u0448\u0435\u043d\u044c","mdf"],["\u043c\u043e\u043d\u0433\u043e\u043b","mn"],["\u043d\u043e\u0445\u0447\u0438\u0439\u043d","ce"],["\u043e\u043b\u044b\u043a \u043c\u0430\u0440\u0438\u0439","mhr"],["\u041f\u0435\u0440\u0435\u043c \u041a\u043e\u043c\u0438","koi"],["\u0440\u0443\u0441\u0438\u043d\u044c\u0441\u043a\u044b\u0439","rue"],["\u0440\u0443\u0441\u0441\u043a\u0438\u0439","ru"],["\u0441\u0430\u0445\u0430 \u0442\u044b\u043b\u0430","sah"],["\u0441\u043b\u043e\u0432\u0463\u043d\u044c\u0441\u043a\u044a / \u2c14\u2c0e\u2c11\u2c02\u2c21\u2c10\u2c20\u2c14\u2c0d\u2c1f","cu"],["\u0441\u0440\u043f\u0441\u043a\u0438 / srpski","sr"],["\u0442\u0430\u0442\u0430\u0440\u0447\u0430/tatar\xe7a","tt"],["\u0442\u043e\u04b7\u0438\u043a\u04e3","tg"],["\u0442\u044b\u0432\u0430 \u0434\u044b\u043b","tyv"],["\u0443\u0434\u043c\u0443\u0440\u0442","udm"],["\u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430","uk"],["\u0445\u0430\u043b\u044c\u043c\u0433","xal"],["\u0427\u04d1\u0432\u0430\u0448\u043b\u0430","cv"],["\u044d\u0440\u0437\u044f\u043d\u044c","myv"],["\u049b\u0430\u0437\u0430\u049b\u0448\u0430","kk"],["\u0570\u0561\u0575\u0565\u0580\u0565\u0576","hy"],["\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9","yi"],["\u05e2\u05d1\u05e8\u05d9\u05ea","he"],["\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u06d5 / Uyghurche","ug"],["\u0627\u0631\u062f\u0648","ur"],["\u0627\u0644\u0639\u0631\u0628\u064a\u0629","ar"],["\u062a\u06c6\u0631\u06a9\u062c\u0647","azb"],["\u0633\u0646\u068c\u064a","sd"],["\u0641\u0627\u0631\u0633\u06cc","fa"],["\u0644\u06ca\u0631\u06cc \u0634\u0648\u0645\u0627\u0644\u06cc","lrc"],["\u0645\u0627\u0632\u0650\u0631\u0648\u0646\u06cc","mzn"],["\u0645\u0635\u0631\u0649","arz"],["\u067e\u0646\u062c\u0627\u0628\u06cc","pnb"],["\u067e\u069a\u062a\u0648","ps"],["\u06a9\u0648\u0631\u062f\u06cc","ckb"],["\u06af\u06cc\u0644\u06a9\u06cc","glk"],["\u0710\u072a\u0721\u071d\u0710","arc"],["\u078b\u07a8\u0788\u07ac\u0780\u07a8\u0784\u07a6\u0790\u07b0","dv"],["\u0915\u0949\u0936\u0941\u0930 / \u06a9\u0672\u0634\u064f\u0631","ks"],["\u0917\u094b\u0902\u092f\u091a\u0940 \u0915\u094b\u0902\u0915\u0923\u0940 / G\xf5ychi Konknni","gom"],["\u0921\u094b\u091f\u0947\u0932\u0940","dty"],["\u0928\u0947\u092a\u093e\u0932 \u092d\u093e\u0937\u093e","new"],["\u0928\u0947\u092a\u093e\u0932\u0940","ne"],["\u092a\u093e\u0932\u093f","pi"],["\u092d\u094b\u091c\u092a\u0941\u0930\u0940","bh"],["\u092e\u0930\u093e\u0920\u0940","mr"],["\u092e\u0948\u0925\u093f\u0932\u0940","mai"],["\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d","sa"],["\u0939\u093f\u0928\u094d\u0926\u0940","hi"],["\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be","as"],["\u09ac\u09be\u0982\u09b2\u09be","bn"],["\u09ac\u09bf\u09b7\u09cd\u09a3\u09c1\u09aa\u09cd\u09b0\u09bf\u09af\u09bc\u09be \u09ae\u09a3\u09bf\u09aa\u09c1\u09b0\u09c0","bpy"],["\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40","pa"],["\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0","gu"],["\u0b13\u0b21\u0b3c\u0b3f\u0b06","or"],["\u0ba4\u0bae\u0bbf\u0bb4\u0bcd","ta"],["\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41","te"],["\u0c95\u0ca8\u0ccd\u0ca8\u0ca1","kn"],["\u0ca4\u0cc1\u0cb3\u0cc1","tcy"],["\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02","ml"],["\u0dc3\u0dd2\u0d82\u0dc4\u0dbd","si"],["\u0e44\u0e17\u0e22","th"],["\u0ea5\u0eb2\u0ea7","lo"],["\u0f47\u0f7c\u0f44\u0f0b\u0f41","dz"],["\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42","bo"],["\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c","my"],["\u10db\u10d0\u10e0\u10d2\u10d0\u10da\u10e3\u10e0\u10d8","xmf"],["\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8","ka"],["\u1275\u130d\u122d\u129b","ti"],["\u12a0\u121b\u122d\u129b","am"],["\u1403\u14c4\u1483\u144e\u1450\u1466/inuktitut","iu"],["\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a","km"],["\u1a05\u1a14 \u1a15\u1a18\u1a01\u1a17","bug"],["\u1c65\u1c5f\u1c71\u1c5b\u1c5f\u1c72\u1c64","sat"],["\u4e2d\u6587","zh"],["\u5434\u8bed","wuu"],["\u5ba2\u5bb6\u8a9e/Hak-k\xe2-ng\xee","hak"],["\u6587\u8a00","zh-classical"],["\u65e5\u672c\u8a9e","ja"],["\u7cb5\u8a9e","zh-yue"],["\u8d1b\u8a9e","gan"],["\ua187\ua259","ii"],["\u13e3\u13b3\u13a9","chr"],["\ud55c\uad6d\uc5b4","ko"],["\ud800\udf32\ud800\udf3f\ud800\udf44\ud800\udf39\ud800\udf43\ud800\udf3a","got"]];var y=function(e){var t=e.handleChanges,n=navigator.language.split("-")[0]||"en",a=k.map((function(e){return Object(m.jsx)("option",{value:e[1],children:e[0]},e[1])}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{htmlFor:"lang",children:"Select your language:"}),Object(m.jsx)("select",{onChange:function(e){return t(e.target.value)},defaultValue:n,children:a})]})};var x=function(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return e.init.lang})),a=function(e){e.preventDefault(),t({type:"init/start"})};return Object(m.jsxs)("form",{onSubmit:a,children:[Object(m.jsx)(O,{id:"main",handleChanges:function(e){t({type:"init/set",payload:{key:"searchString",value:e}})},lang:n}),Object(m.jsx)(y,{handleChanges:function(e){t({type:"init/set",payload:{key:"lang",value:e}})}}),Object(m.jsxs)("button",{className:"btn",onClick:a,children:[Object(m.jsx)("span",{className:"material-icons-outlined",children:"search"}),"Search"]})]})};var v=function(e){var t=Object(s.c)((function(e){return e.init}));return Object(m.jsxs)("section",{id:"splash",className:!0===t.start&&""!==t.lang&&""!==t.searchString?"hidden":"",children:[Object(m.jsx)("h1",{children:"Welcome to Wiki-Tree!"}),Object(m.jsx)("p",{children:"select your language and start exploring"}),Object(m.jsx)("img",{src:"./logo.svg",alt:"Wiki-Tree logo"}),Object(m.jsx)(x,{}),Object(m.jsx)("p",{className:"wt-info",children:"Wiki-Tree is a project by Cl\xe9ment Corbin aimed at providing a visual exploration of Wikipedia. It draws a 3d force graph representing articles and their relations."})]})};var w=function(e){var t=e.action,n=Object(s.c)((function(e){return e.worker})),r=Object(a.useState)([]),i=Object(d.a)(r,2),c=i[0],o=i[1],u=Object(a.useState)(""),l=Object(d.a)(u,2),j=l[0],b=l[1];Object(a.useEffect)((function(){n.message.search&&o(n.message.search)}),[n.message]);var h=function(e){var n;e.preventDefault(),"undefined"!==typeof(n=c.find((function(e){return e.name===j})))?t({action:"focusNode",options:{node:n}}):alert("node not found: "+j)};return Object(m.jsxs)("form",{onSubmit:h,children:[Object(m.jsx)("label",{htmlFor:"searchInput",children:"Search terms:"}),Object(m.jsx)("input",{id:"locate",onChange:function(e){b(e.target.value),n.entity.postMessage({action:"search",options:{searchString:j}})},type:"search",list:"locateresults",value:j,className:"textInput"}),Object(m.jsx)("datalist",{id:"locateresults",children:c.map((function(e){return Object(m.jsx)("option",{value:e.name,children:e.name},e.id)}))}),Object(m.jsxs)("button",{className:"btn",onClick:h,children:[Object(m.jsx)("span",{className:"material-icons-outlined",children:"location_searching"}),"Search"]})]})};var S=function(e){var t=e.lang,n=e.id,r=e.action,i=Object(s.c)((function(e){return e.worker})),c=Object(a.useState)(""),o=Object(d.a)(c,2),j=o[0],b=o[1],h=Object(a.useState)([]),p=Object(d.a)(h,2),g=p[0],O=p[1],k=Object(a.useState)([]),y=Object(d.a)(k,2),x=y[0],v=y[1],w=Object(a.useState)([]),S=Object(d.a)(w,2),N=S[0],C=S[1],z=function(e){return e.map((function(e){return Object(m.jsx)("li",{onClick:function(){r({action:"focusNode",options:{node:e}})},children:e.name},e.id)}))};return Object(a.useEffect)((function(){Object(l.a)(u.a.mark((function e(){var a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new f(t),r=a.buildRequest({action:"query",pageids:[n],prop:"extracts",exintro:!0,exlimit:1})[0].url,e.next=4,fetch(r);case 4:return i=e.sent,e.next=7,i.json();case 7:i=(i=e.sent).query.pages[n],b(i.extract);case 10:case"end":return e.stop()}}),e)})))()}),[n,t]),Object(a.useEffect)((function(){i.entity.postMessage({action:"getNode",options:{id:n}})}),[n]),Object(a.useEffect)((function(){i.message.node&&i.message.node.id===n&&(O(i.message.node.adjacent.filter((function(e){return"taxonomy"===e.edgeEntity}))),v(i.message.node.adjacent.filter((function(e){return"outlink"===e.edgeEntity}))),C(i.message.node.adjacent.filter((function(e){return"backlink"===e.edgeEntity}))))}),[i.message]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("article",{dangerouslySetInnerHTML:{__html:j}}),Object(m.jsxs)("article",{children:[g.length>0?Object(m.jsxs)("details",{open:!0,children:[Object(m.jsx)("summary",{children:"Categories:"}),Object(m.jsx)("ul",{children:z(g)})]}):Object(m.jsx)(m.Fragment,{}),x.length>0?Object(m.jsxs)("details",{open:!0,children:[Object(m.jsx)("summary",{children:"Links:"}),Object(m.jsx)("ul",{children:z(x)})]}):Object(m.jsx)(m.Fragment,{}),N.length>0?Object(m.jsxs)("details",{open:!0,children:[Object(m.jsx)("summary",{children:"Backlinks:"}),Object(m.jsx)("ul",{children:z(N)})]}):Object(m.jsx)(m.Fragment,{})]}),Object(m.jsxs)("div",{className:"buttons",children:[Object(m.jsx)("button",{title:"Expand node",onClick:function(){r({action:"articlesLookup",options:{pageids:[n]}})},children:Object(m.jsx)("span",{className:"material-icons-outlined",children:"zoom_out_map"})}),Object(m.jsx)("button",{title:"Delete node",onClick:function(){r({action:"removeNode",options:{id:n}})},children:Object(m.jsx)("span",{className:"material-icons-outlined",children:"delete"})}),Object(m.jsx)("a",{href:"https://"+t+".wikipedia.org/?curid="+n,rel:"noreferrer",target:"_blank",title:"View this page on Wikipedia",children:Object(m.jsx)("span",{className:"material-icons-outlined",children:"link"})})]})]})};var N=function(){var e=Object(s.c)((function(e){return e.settings})),t=Object(s.b)(),n=function(e){var n=e.key,a=e.value;t({type:"settings/set",payload:{key:n,value:a}})};return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("form",{children:[Object(m.jsx)("label",{htmlFor:"repulsion",children:"Nodes repulsion:"}),Object(m.jsx)("input",{type:"range",name:"repulsion",id:"repulsion",max:"10000",min:"0",onChange:function(e){n({key:"nodeRepulsion",value:-1*parseInt(e.target.value)})},value:-1*e.nodeRepulsion}),Object(m.jsx)("label",{htmlFor:"curvature",children:"Link curvature:"}),Object(m.jsx)("input",{type:"range",name:"curvature",id:"curvature",max:"3",min:"0",step:"0.05",onChange:function(e){n({key:"curvature",value:parseFloat(e.target.value)})},value:e.curvature}),Object(m.jsx)("label",{htmlFor:"showarrows",children:"Show links arrows:"}),Object(m.jsx)("input",{type:"checkbox",name:"showarrows",id:"showarrows",onChange:function(e){n({key:"arrows",value:e.target.checked?1:0})},checked:!!e.arrows})]})})};var C,z=function(e){var t=e.id,n=e.action,r=Object(s.c)((function(e){return e.worker})),i=Object(a.useState)({adjacent:[]}),c=Object(d.a)(i,2),o=c[0],u=c[1],l=function(e){return o.adjacent.filter((function(t){return t.entity===e})).map((function(t){return Object(m.jsx)("li",{onClick:function(){!function(e){n({action:"focusNode",options:{node:e}})}(t)},children:"category"===e?t.name.split(":").slice(1).join(":"):t.name},t.id)}))};return Object(a.useEffect)((function(){r.message.node&&r.message.node.id===t&&u(r.message.node)}),[r.message]),Object(a.useEffect)((function(){r.entity.postMessage({action:"getNode",options:{id:t}})}),[t]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("article",{children:[o.adjacent.filter((function(e){return"category"===e.entity})).length>0?Object(m.jsxs)("details",{open:!0,children:[Object(m.jsx)("summary",{children:"Categories:"}),Object(m.jsx)("ul",{children:l("category")})]}):Object(m.jsx)(m.Fragment,{}),o.adjacent.filter((function(e){return"article"===e.entity})).length>0?Object(m.jsxs)("details",{open:!0,children:[Object(m.jsx)("summary",{children:"Pages:"}),Object(m.jsx)("ul",{children:l("article")})]}):Object(m.jsx)(m.Fragment,{})]}),Object(m.jsxs)("div",{className:"buttons",children:[Object(m.jsx)("button",{title:"Expand node",onClick:function(){n({action:"categoriesLookup",options:{cmpageid:t}})},children:Object(m.jsx)("span",{className:"material-icons-outlined",children:"zoom_out_map"})}),Object(m.jsx)("button",{title:"Delete node",onClick:function(){n({action:"removeNode",options:{id:t}})},children:Object(m.jsx)("span",{className:"material-icons-outlined",children:"delete"})})]})]})},E=function(e){var t=e.lang,n=e.handleSubmit,r=Object(a.useState)(""),i=Object(d.a)(r,2),c=i[0],s=i[1],o=function(e){e.preventDefault(),console.log(c),n({searchString:c})};return Object(m.jsxs)("form",{onSubmit:o,children:[Object(m.jsx)(O,{id:"drawer",handleChanges:s,lang:t}),Object(m.jsxs)("button",{className:"btn",onClick:o,children:[Object(m.jsx)("span",{className:"material-icons-outlined",children:"search"}),"Search"]})]})},F=function(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return e.init.lang})),a=Object(s.c)((function(e){return e.drawer.content})),r=function(e){t({type:"drawer/action",payload:e})};return Object(m.jsxs)("aside",{id:"drawer",className:0===Object.keys(a).length?"hidden":"",children:[Object(m.jsxs)("header",{children:[Object(m.jsx)("h2",{children:a.title}),Object(m.jsx)("button",{className:"closebtn",title:"Close drawer",onClick:function(){return r("closeDrawer")},children:Object(m.jsx)("span",{className:"material-icons-outlined",children:"close"})})]}),Object(m.jsx)("main",{children:function(){if(0!==Object.keys(a).length)switch(a.component){case"locate":return Object(m.jsx)(w,{action:r});case"settings":return Object(m.jsx)(N,{});case"addSearch":return Object(m.jsx)(E,{lang:n,handleSubmit:function(e){r({action:"addSearch",options:e})}});case"article":return Object(m.jsx)(S,{lang:n,id:a.id,action:r});case"category":return Object(m.jsx)(z,{id:a.id,action:r});default:return Object(m.jsx)(m.Fragment,{})}}()})]})},q=function(e){var t=Object(s.b)(),n=function(e){t({type:"drawer/content",payload:e})};return Object(m.jsxs)("aside",{id:"toolbar",children:[Object(m.jsx)("button",{title:"perform a new search to complete the graph",onClick:function(){n({component:"addSearch",title:"Add new node"})},children:Object(m.jsx)("span",{className:"material-icons-outlined",children:"zoom_in"})}),Object(m.jsx)("button",{title:"search for a node on the graph",onClick:function(){n({component:"locate",title:"Locate a node"})},children:Object(m.jsx)("span",{className:"material-icons-outlined",children:"location_searching"})}),Object(m.jsx)("button",{title:"clear all & start from scratch",onClick:function(){window.confirm("This will clear all your graph and bring you back to the initial search form.\nAre you sure?")&&t({reset:!0,type:"reset"})},children:Object(m.jsx)("span",{className:"material-icons-outlined",children:"refresh"})}),Object(m.jsx)("button",{title:"fine tune your graph",onClick:function(){n({component:"settings",title:"Settings"})},children:Object(m.jsx)("span",{className:"material-icons-outlined",children:"settings"})}),Object(m.jsx)("button",{title:"what am I seeing? help!",children:Object(m.jsx)("span",{className:"material-icons-outlined",children:"support"})})]})},T=n(61),L=n(60),M=(new Worker("/graphDataWorker.js"),function(e){var t=Object(s.b)(),n=Object(a.useState)(!1),r=Object(d.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)({nodes:[],links:[]}),b=Object(d.a)(o,2),h=b[0],p=b[1],g=Object(a.useState)({nodes:[],edges:[]}),O=Object(d.a)(g,2),k=O[0],y=O[1],x=Object(s.c)((function(e){return e.worker.entity})),v=Object(s.c)((function(e){return e.worker.message})),w=Object(s.c)((function(e){return e.init.searchString})),S=Object(s.c)((function(e){return e.init.lang})),N=Object(s.c)((function(e){return e.drawer.action})),z=Object(s.c)((function(e){return e.settings.nodeRepulsion})),E=Object(s.c)((function(e){return e.settings.curvature})),F=(Object(s.c)((function(e){return e.settings.bloom})),Object(s.c)((function(e){return e.settings.arrows}))),q=Object(a.useRef)(null),M=Object(a.useRef)(),I=function(e){x.postMessage({action:"dispatch",options:e})},R=function(e){x.postMessage({action:"lookupCallback",options:e})},B=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.buildRequest({action:"query",list:"search",srsearch:t,srnamespace:0,srlimit:1})[0].url,e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:return a=(a=e.sent).query.search[0],I({type:"nodes/create",payload:{id:a.pageid,entity:0===a.ns?"article":"category",name:a.title}}),P({pageids:[a.pageid]},!0),e.abrupt("return");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(e){e.action="query";var t=Object(j.a)({},e),n=Object(j.a)({},e),a=Object(j.a)({},e);t.prop="info",t.generator="linkshere",t.glhlimit=500,t.glhnamespace=0,n.gpllimit=500,n.gplnamespace=0,n.generator="links",n.prop="info",a.gcllimit=500,a.generator="categories",a.prop="info",a.gclshow="!hidden",[[a,"categoriesList"],[n,"pageLinks"],[t,"linksHere"]].forEach((function(e){D(e[0],e[1])}));var r=e.pageids;"object"!==typeof r&&(r=[r]),r.forEach((function(e){I({type:"nodes/loaded",payload:{id:e}})}))},D=function(e,t){var n=function(){var e=Object(l.a)(u.a.mark((function e(t,a,r){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.next();case 2:if("undefined"!==typeof(i=e.sent.value)){e.next=5;break}return e.abrupt("return");case 5:delete i.redirects,i=i[Object.keys(i)[0]],R({callback:a,id:r,results:i}),n(t,a,r);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();C.buildRequest(e).forEach((function(e){var a=C.fetchAndContinue(e.url);n(a,t,e.pageid||e.cmpageid)}))},A=function(e){e=h.nodes.find((function(t){return t.id===e.id}));var n=1+80/Math.hypot(e.x,e.y,e.z);M.current.cameraPosition({x:e.x*n,y:e.y*n,z:e.z*n},e,1500),t({type:"drawer/content",payload:{component:e.entity,title:e.name,id:e.id}})};return Object(a.useEffect)((function(){var e=new f(S);C=e,B(w)}),[]),Object(a.useEffect)((function(){v.state?(clearTimeout(q.current),q.current=setTimeout((function(){x.postMessage({action:"getGraph",options:{oldNodes:JSON.stringify(h.nodes)}})}),12)):v.graph?p(v.graph):v.articlesLookup&&P(v.articlesLookup)}),[v]),Object(a.useEffect)((function(){var e=N;if(e.action){var t,n=e.action,a=e.options;switch(n){case"addSearch":return void B(a.searchString);case"articlesLookup":return void P(a);case"removeNode":return t=a.id,void I({type:"nodes/remove",payload:{id:t}});case"focusNode":return void A(a.node);case"categoriesLookup":return void function(e){e.action="query",e.list="categorymembers",e.cmlimit=5,e.cmtype=["page","subcat"],D(e,"categoryMembers"),I({type:"nodes/loaded",payload:{id:e.cmpageid}})}(a);default:return}}}),[N]),Object(a.useEffect)((function(){M.current.d3Force("charge").strength(z),i&&M.current.d3ReheatSimulation()}),[z]),Object(m.jsx)(L.a,{onEngineStop:function(){c(!0)},linkOpacity:1,linkColor:function(e){return k.edges.includes(e.id)?"#fbfbf2ff":"#fbfbf240"},linkCurvature:E,onNodeHover:function(e){null!==e?function(e){var t=h.nodes.find((function(t){return t.id===e})).adjacent;y({edges:t.map((function(e){return e.edgeId})),nodes:[].concat(Object(T.a)(t.map((function(e){return e.id}))),[e])})}(e.id):y({nodes:[],edges:[]})},onNodeClick:A,ref:M,nodeColor:function(e){return k.nodes.includes(e.id)?"#fbfbf2":"category"===e.entity?"#ea526f":"#1b5299"},linkDirectionalArrowLength:F,linkDirectionalArrowRelPos:1,nodeOpacity:.99,backgroundColor:"rgba(0,0,0,0)",graphData:h})}),I=(n(141),new Worker("/mainWorker.js"));var R=function(){var e=Object(s.c)((function(e){return e.init})),t=Object(s.b)();return Object(a.useEffect)((function(){!0===e.start&&I.postMessage({action:"dispatch",options:{type:"reset"}})}),[e.start]),Object(a.useEffect)((function(){t({type:"worker/entity",payload:I}),I.onmessage=function(e){t({type:"worker/message",payload:e.data})}}),[]),Object(m.jsxs)("main",{className:"App",children:[Object(m.jsx)(v,{}),!0===e.start&&""!==e.lang&&""!==e.searchString&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(M,{}),Object(m.jsx)(q,{})]}),Object(m.jsx)(F,{})]})},B=n(62),P=n(11),D=function(e,t){var n=t.type,a=t.payload;switch(n){case"init/set":return Object(j.a)(Object(j.a)({},e),{},Object(P.a)({},a.key,a.value));case"init/start":return Object(j.a)(Object(j.a)({},e),{},{start:!0});default:return e}},A=function(e,t){var n=t.type,a=t.payload;return"worker/entity"===n?Object(j.a)(Object(j.a)({},e),{},{entity:a}):"worker/message"===n?Object(j.a)(Object(j.a)({},e),{},{message:a}):e},W=function(e,t){var n=t.type,a=t.payload;switch(n){case"drawer/action":return"closeDrawer"===a?Object(j.a)(Object(j.a)({},e),{},{content:{},action:a}):Object(j.a)(Object(j.a)({},e),{},{action:a});case"drawer/content":return Object(j.a)(Object(j.a)({},e),{},{content:a});default:return e}},K=function(e,t){var n=t.type,a=t.payload;return"settings/set"===n?e[a.key]===a.value?e:Object(j.a)(Object(j.a)({},e),{},Object(P.a)({},a.key,parseFloat(a.value))):e},_={init:{start:!1,lang:navigator.language.split("-")[0]||"en",searchString:""},drawer:{content:{},action:{}},settings:{bloom:0,arrows:0,nodeRepulsion:-50,curvature:0},worker:{postMessage:function(){},message:{}}};var H=Object(B.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;return t.reset&&(console.warn("RESET"),e=Object(j.a)(Object(j.a)({},e),{},{init:_.init,settings:_.settings,drawer:_.drawer})),{init:D(e.init,t),drawer:W(e.drawer,t),worker:A(e.worker,t),settings:K(e.settings,t)}}));c.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(s.a,{store:H,children:Object(m.jsx)(R,{})})}),document.getElementById("root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.22e99d9d.chunk.js.map